<!DOCTYPE html>
<html >
    <head>
        <title>recShare | recipe viewer</title>
    </head>
    <body style="min-height: 100vh;margin: 0px 0px 0px 0px;" >
        <header style="background-color:rgb(68, 57, 57);">
            <img style="width: 100px;height: 100px;display: inline-block;margin: 10px 0px 0px 0px;" src="data:image/jpeg;base64,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">
    
            <a href="index.html" target="_parent" >           
            <h1 style="color: rgb(163, 153, 153);margin: 0px 0px 10px 0px;display: inline-block;" align="left"><br>recShare<br><br></h1>
            </a> 
        </header>
         <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
        <script src="script.js"></script>
        <script>
        
            
            
            //----------------------------------------
            let limit = 0
            let Steps = []
            let No_of_steps=1
            let Approved = "NO"
            
            let StepCount = 0
            


            function ranLink() {
                return(urlsList[Math.floor(Math.random()*urlsList.length)])
                }
        </script>
        <script>
            function add() {
                let table= document.getElementById("Ingredience")
                if (table.rows.length <19){
                    let row = table.insertRow(-1)
                    let cell1= row.insertCell(0)
                    let cell2=row.insertCell(1)
                    cell1.innerHTML =`<input type='text' style='width:90%;'></input>`;
                    cell2.innerHTML =`<input type='text'style='width:90%;'></input>`;
                }else{
                    let hide = document.getElementById("add")
                    hide.style.visibility="hidden";
                }}
            function del() {
                let table= document.getElementById("Ingredience")
                if (table.rows.length >1){
                    table.deleteRow(-1)
                    }
                    let hide = document.getElementById("add")
                    hide.style.visibility="visible";
                }
            function table_retrival() {
                let table = document.querySelector("table");
                let inputs = table.querySelectorAll("input");
                let Ingredience ={}
                for (let i=0;i<inputs.length;i+=2){
                Ingredience[inputs[i].value] = Number(inputs[i+1].value);
                }
                console.log("Ingredience object",Ingredience)
                return(Ingredience)
            }
            function refresh(){
                Steps[StepCount]= StepsCall.value
            }
        </script>
        <style>
            button:hover {
                background-color:black;
                color:white;
                border-radius:1px;}
            button {
                height:25px;
                width:25px
            }
            #Ingredience td {
                height: 40px;
            }
            #Ingredience th {
                position: sticky;
                top:0;
                background-color: grey;
                height: 40px;
            }
            #table {
                overflow-y: auto;
            }
            textarea {
                resize: none;
            }
            #yp {
                transform: translateY(44%);
            }
            div {
                margin: 0;
                padding: 0;
                border-radius: 10px;
            }
            #final {
                position: absolute;
                bottom: 0;
                transform: translateX(-50%);  
            }
            



            #preview_div th{
                color:white;
                mix-blend-mode: difference;
                background: transparent;
            }
            #preview_div table {
                background: transparent;
            }
        </style>
        <div><br>
            
            <div id = "left"  style="width: 50%;height: 100%;float:left;">
                <div style="display: inline-block;">
                    <label for ="dishname" style="vertical-align: middle;">DishName</label>
                    <textarea  id = "dishname" style="height:20px;vertical-align: middle;"></textarea>
                </div>
                <div style="display: inline-block;">
                    <label for ="Background_colour" style="vertical-align: middle;background-color: black;color: white;">theme</label>
                    <input type="color"  id = "Background_colour" style="height:0px;width:0px ;vertical-align: middle;"></input>
                </div><br>
                <!-------------------><br><!------------------->
                <div>
                    <label for ="Cuisine" style="vertical-align: middle;">Cuisine</label>
                    <textarea  id = "Cuisine" style="height:15px;vertical-align: middle;" ></textarea>
                </div>
                <!-------------------><br>
                <div style="height:15px;">
                    <label for ="Portion" style="vertical-align:middle;">Portion</label>
                    <textarea id = "Portion" style="height:15px;vertical-align:middle;"></textarea> 
                </div><br>
                <div>
                    <label for ="url" style="vertical-align: middle;">Front_page(url/image link)</label>
                    <textarea  id = "url" style="height:20px;width: 500px;vertical-align: middle;"placeholder="type 'none' for none"></textarea>
                </div>
                <!-------------------><br>
                <div style="height:410px;width: 500px;">
                    <label for ="Steps" id="StepCount">Steps<br></label>
                    <div>
                        <button style="vertical-align: middle;display: inline-block;" onclick="StepLeft()" class="button"><</button>
                        <textarea id = "Steps" style="height:380px;width:400px;vertical-align: middle"></textarea>
                        <div id ="yp" style="height:200px;width: 40px;vertical-align: middle;display: inline-block;">
                            <div style="height:100%;width:100% ;display: flex; flex-direction: column;justify-content: space-between;">
                                <button onclick="StepRight()" class="button">></button>
                                <button onclick="refresh()" class="button">â†º</button>
                                <button onclick="clears()" class="button">x</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            


            <div  id="right" style="width: 20%;float: right;">
                <div align="center"style="height:420px ;">
                    <label for ="Ingredience" align="left">Ingredience<br></label>
                    <div>
                        <div style="height:380px;width:200px;vertical-align: middle;display: inline-block;" id ="table">
                            <table style="width:100%" id = "Ingredience" border=1>
                                <th>ingredient</th><th>ammount</th>
                            </table>
                            
                        </div >
                        <div style="vertical-align:middle;display: inline-block; ">
                            <div style="height:100%;width:100% ;display: flex; flex-direction: column;justify-content: space-between;">
                                <button id="add" onclick="add()">+</button>
                                <button id="delete" onclick="del()">-</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-------------------><br>
                <div align="center">
                    <label for ="Approved">Approved</label>
                    <input readonly type="text" id="Approved" style="width:30px ;vertical-align: bottom;" ></input>
                </div>
            </div>
        </div>
        <div style="margin:0 22% 0 52%;display: block;width:25%;" align="center">
            <button style="width:70px" onclick="preview()">preview</button>
            <div style="width :220px;height: 220px;">
                <table id="preview_div" border="0"><tr></tr></table>
            </div>
            <br>
        <button id="final" style="width:70px" onclick="final()">sumbit</button>

        <script>
            
            let ApprovedCall = document.getElementById("Approved");
            ApprovedCall.value=Approved;
            let StepsCall = document.getElementById("Steps");
            let StepCountCall = document.getElementById("StepCount");
            StepCountCall.innerHTML =`<label for ="Steps" id="StepCount">Steps[${StepCount+1}]<br></label>`;
            
            
            
            
            
            
            
            let hide= document.getElementsByClassName("button");
            
            
            hide[0].style.visibility="hidden";
            
            function StepLeft() {
                StepCount-=1;
                
                
                let hide= document.getElementsByClassName("button");
                StepCountCall.innerHTML =`<label for ="Steps" id="StepCount">Steps[${StepCount+1}]<br></label>`;
                if (StepCount===0){
                    hide[0].style.visibility="hidden";
                }
                //if (StepCount<20){
                    hide[1].style.visibility="visible";
                //}
                //add this to sumbit button but with no +1
                
                if (No_of_steps!=Steps.length){
                    
                    Steps[StepCount+1]=StepsCall.value
                    //No_of_steps+=1
                    
                }
                
                
                StepsCall.value=Steps[StepCount];
                
                }
            
            function StepRight() {
                StepCount+=1;
                
                
                let hide= document.getElementsByClassName("button");
                StepCountCall.innerHTML =`<label for ="Steps" id="StepCount">Steps[${StepCount+1}]<br></label>`;
                
                if (StepCount>0){
                    hide[0].style.visibility="visible";
                }
                if (StepCount===14){
                    hide[1].style.visibility="hidden";
                }
                
                if (StepCount==No_of_steps){
                    Steps[StepCount-1]=StepsCall.value
                    No_of_steps+=1
                    console.log("store",Steps[StepCount-1])
                    if (StepCount!=20){
                        StepsCall.value=""
                    }
                  
                } else {
                    StepsCall.value=Steps[StepCount]
                }
                
                
                
                }
            function sumbit() {
                if (No_of_steps!=Steps.length){
                    Steps[StepCount]=StepsCall.value}
                let dictionary={}
                let DishNameCall = document.getElementById("dishname");
                dictionary.DishName= DishNameCall.value;
                let CuisineCall = document.getElementById("Cuisine");
                dictionary.Cuisine= CuisineCall.value;
                
               
                dictionary.Ingredience = table_retrival()
                
                dictionary.Steps =Steps
                dictionary.Approved="no"
                let url = document.getElementById("url")
                dictionary.Front_page=url.value
                let Background_colour = document.getElementById("Background_colour")
                dictionary.Background_colour=Background_colour.value
                let PortionCall = document.getElementById("Portion");
                dictionary.MaxPortion= PortionCall.value;
                console.log(dictionary)
                return(dictionary)
                }
            function clears(){
                if (StepCount+1>1){
                    if (No_of_steps==StepCount+1){
                        StepLeft()
                        Steps.pop()
                        No_of_steps-=1
                        }
                    }
                }
            function preview(){
                
                
                let preview = document.getElementById("preview_div")
                preview.deleteRow(-1)
                let row1 = preview.insertRow(-1)
                let cell = row1.insertCell(0)
                
                let recipe = sumbit()
                cell.innerHTML = `
                <div readonly>
                <div style="border:1px solid black;width:220px;height:220px;margin: 0; background-color:${recipe["Background_colour"]};">
                        <table style="display:inline;vertical-align:top;">
                            <tr><th style="height:14px" id=test style="filter:contrast(.5);">no*[N]</th></tr> 
                        </table>
                        <div align='center' style="display:flex;aligns-item:flex-end">
                            <div align='center' style="position:relative; bottom:0;left:5px; transform:translateY(3%);border-radius: 0 0 10px 10px;background-color:white;width:96%">
                                <table  style="margin: 0;width:150px">
                                    <tr><td  align='center'><textarea readonly style="height:20px;margin: 0" >DishName:${recipe["DishName"]}</textarea></td></tr> 
                                    <tr><td align='center' height=100px><img height =100px src="${recipe["Front_page"]}" onerror="this.onerror=null; this.src='${ranLink()}'"></td></tr>
                                    <tr><td  align='center'><textarea readonly style="height:20px;margin: 0" >Cuisine:${recipe["Cuisine"]}</textarea></td></tr>
                                </table>
                            </div>
                        </div>
                    </div></div>`
            }
            
            function final() {
                if (confirm("are you sure you want to sumbit")) {
                    console.log("wants to save")
                    let save = sumbit()
                    for (i in save) {if (save[i] == "" || save[i] == "NULL"){limit =0;console.log("save rejected")}}
                    if (limit == 0) {
                        console.log("save pass")
                        ///send the varriable called submit() to some how be append saved
                        async function saveRecipe(dictionary) {
                          const { data, error } = await Supabase
                            .from("recipes")
                            .insert([{ dictionary }]); // dictionary is a JSON object
                        
                          if (error) {
                            console.error("Save error:", error);
                            return null;
                          }
                          console.log("Inserted data:", data);
                          return data;
                        }
                        
                        saveRecipe(save) 

                        
                        console.log("saved")
                    }
                    limit -=1 
                }
            }
        </script>
    </body>
</html>
